---
{"dg-publish":true,"permalink":"/02_Javascript/javascript-particular/10.JS进阶/","created":"2025-07-09T20:48:24.826+08:00","updated":"2025-07-14T15:48:17.766+08:00"}
---

# 1.原型和原型链

- 所有对象都是通过`new 函数`创建
    
- 所有的函数也是对象
    
    - 函数中可以有属性
        
- 所有对象都是引用类型
    

## 原型 prototype

所有函数都有一个属性：prototype，称之为函数原型

默认情况下，prototype是一个普通的Object对象

默认情况下，prototype中有一个属性，constructor，它也是一个对象，它指向构造函数本身。

## 隐式原型 **proto**

所有的对象都有一个属性：`__proto__`，称之为隐式原型

默认情况下，隐式原型指向创建该对象的函数的原型。

当访问一个对象的成员时：

1. 看该对象自身是否拥有该成员，如果有直接使用
    
2. 在原型链中依次查找是否拥有该成员，如果有直接使用
    

猴子补丁：在函数原型中加入成员，以增强起对象的功能，猴子补丁会导致原型污染，使用需谨慎。

## 原型链

特殊点：

1. Function的**proto**指向自身的prototype
    
2. Object的prototype的**proto**指向null
# 2.原型链的应用

## 基础方法

W3C不推荐直接使用系统成员**proto**

**Object.getPrototypeOf(对象)**

获取对象的隐式原型

**Object.prototype.isPrototypeOf(对象)**

判断当前对象(this)是否在指定对象的原型链上

**对象 instanceof 函数**

判断函数的原型是否在对象的原型链上

**Object.create(对象)**

创建一个新对象，其隐式原型指向指定的对象

**Object.prototype.hasOwnProperty(属性名)**

判断一个对象**自身**是否拥有某个属性

## 应用

**类数组转换为真数组**

 Array.prototype.slice.call(类数组);

**实现继承**

默认情况下，所有构造函数的父类都是Object

圣杯模式

# 3.属性描述符

属性描述符的配置参考：[https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

属性描述符：它表达了一个属性的相关信息（元数据），它本质上是一个对象。

1. 数据属性
    
2. 存取器属性
    
    1. 当给它赋值，会自动运行一个函数
        
    2. 当获取它的值时，会自动运行一个函数
        

其他的属性描述符

**Object.getOwnPropertyDescriptor**

获取某个对象的某个属性的属性描述符对象（该属性必须直接属于该对象）

# 4.执行上下文

函数执行上下文：一个函数运行之前，创建的一块内存空间，空间中包含有该函数执行所需要的数据，为该函数执行提供支持。

执行上下文栈：call stack，所有执行上下文组成的内存空间。

栈：一种数据结构，先进后出，后进先出。

全局执行上下文：所有JS代码执行之前，都必须有该环境。

JS引擎始终执行的是栈顶的上下文。

## 执行上下文中的内容

1. this指向
    

1). 直接调用函数，this指向全局对象 2). 在函数外，this指向全局对象 3). 通过对象调用或new一个函数，this指向调用的对象或新对象

2. VO 变量对象
    

Variable Object：VO 中记录了该环境中所有声明的参数、变量和函数

Global Object: GO，全局执行上下文中的VO

Active Object：AO，当前正在执行的上下文中的VO

1). 确定所有形参值以及特殊变量arguments 2). 确定函数中通过var声明的变量，将它们的值设置为undefined，如果VO中已有该名称，则直接忽略。 3). 确定函数中通过字面量声明的函数，将它们的值设置为指向函数对象，如果VO中已存在该名称，则覆盖。

当一个上下文中的代码执行的时候，如果上下文中不存在某个属性，则会从之前的上下文寻找。

# 5.作用域链

1. VO中包含一个额外的属性，该属性指向创建该VO的函数本身
    
2. 每个函数在创建时，会有一个隐藏属性`[[scope]]`，它指向创建该函数时的AO
    
3. 当访问一个变量时，会先查找自身VO中是否存在，如果不存在，则依次查找`[[scope]]`属性。
    

某些浏览器会优化作用域链，函数的`[[scope]]`中仅保留需要用到的数据。

# 6.事件循环

异步：某些函数不会立即执行，需要等到某个时机成熟后才会执行，该函数叫做异步函数。

浏览器的线程：

1. JS执行引擎：负责执行JS代码
    
2. 渲染线程：负责渲染页面
    
3. 计时器线程：负责计时
    
4. 事件监听线程：负责监听事件
    
5. http网络线程：负责网络通信
    

事件队列：一块内存空间，用于存放执行时机到达的异步函数。当JS引擎空闲（执行栈没有可执行的上下文），它会从事件队列中拿出第一个函数执行。

事件循环：event loop，是指函数在执行栈、宿主线程、事件队列中的循环移动。
# 7.对象混合和克隆
# 8.函数防抖和函数节流
# 9.科里化
# 10.函数管道